# 地標備份與匯入說明

## 功能說明

為了確保地標資料不會遺失，系統現在支援將所有地標匯出為 JSON 檔案，並可以隨時匯入回來。

## 使用方法

### 匯出地標（儲存到檔案）

1. 點擊頁面上方的 **「匯出地標」** 按鈕
2. 瀏覽器會自動下載一個名為 `map-markers.json` 的檔案
3. 這個檔案包含所有地標的完整資料（名稱、簡介、位置、照片等）
4. **建議定期匯出備份**，特別是當你添加了很多地標後

### 匯入地標（從檔案載入）

1. 點擊頁面上方的 **「匯入地標」** 按鈕
2. 選擇之前匯出的 `map-markers.json` 檔案
3. 系統會詢問你：
   - **確定**：覆蓋現有地標（使用匯入的資料）
   - **取消**：合併模式（保留現有地標，只添加新的不重複地標）
4. 匯入完成後，所有地標會自動顯示在 3D 地圖上

## 檔案格式

匯出的 JSON 檔案格式如下：

```json
[
  {
    "id": "1234567890",
    "name": "教學大樓",
    "description": "這是教學大樓的簡介",
    "position": {
      "x": 10.5,
      "y": 5.2,
      "z": -20.3
    },
    "imageData": "data:image/jpeg;base64,..."
  },
  ...
]
```

## 注意事項

1. **定期備份**：建議每次添加重要地標後就匯出備份
2. **檔案位置**：匯出的檔案會下載到瀏覽器的預設下載資料夾
3. **資料大小**：如果地標包含很多照片，檔案可能會比較大（因為照片會轉換為 base64 編碼）
4. **瀏覽器限制**：如果地標太多或照片太大，瀏覽器的 localStorage 可能會空間不足，這時系統會提示你匯出備份
5. **跨瀏覽器**：匯出的檔案可以在任何瀏覽器中匯入使用

## 常見問題

### Q: 為什麼需要匯出備份？

A: 瀏覽器的 localStorage 有以下限制：
- 清除瀏覽器資料會導致地標遺失
- 不同瀏覽器之間資料不共享
- 有大小限制（通常 5-10MB）
- 匯出為檔案可以永久保存，不受瀏覽器限制

### Q: 匯入會覆蓋現有資料嗎？

A: 可以選擇：
- **覆蓋模式**：完全替換現有地標（適合從備份還原）
- **合併模式**：只添加新的地標，保留現有的（適合合併多個備份）

### Q: 可以手動編輯 JSON 檔案嗎？

A: 可以！你可以用文字編輯器打開 JSON 檔案進行編輯，然後再匯入。但請注意：
- 保持 JSON 格式正確（逗號、引號等）
- 確保每個地標都有必要的欄位（id, name, position 等）
- 建議先備份原始檔案

## 技術說明

- 匯出格式：JSON（UTF-8 編碼）
- 照片儲存：Base64 編碼（包含在 JSON 中）
- 檔案大小：取決於地標數量和照片大小

